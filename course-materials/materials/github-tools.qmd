---
format: 
  revealjs:
    slide-number: true
    # code-link: true
    highlight-style: a11y
    chalkboard: true
    theme: 
      - ../../meds-slides-styles.scss
editor_options: 
  chunk_output_type: console
---

## {#title-slide data-menu-title="Title Slide" background="#053660"} 

[EDS 296: Data Science Portfolios]{.custom-title}

[*GitHub Tools*]{.custom-subtitle}

<hr class="hr-teal">

[November 8th, 2024]{.custom-subtitle3}

---

## {#show-skills data-menu-title="Demonstrate by doing"} 

[Demonstrate by doing]{.slide-title}

<hr>

GitHub provides *many* cool project management features that facilitate organization, collaboration, coding, and building workflows. By using these tools (while working solo *and* while working with others), you can demonstrate your technical and programming proficiencies.

```{r}
#| eval: true
#| echo: false
#| out-width: "100%"
#| fig-align: "center"
#| fig-alt: "Four little monsters on grass support another monster starting their climb up a rock face. The climberâ€™s harness is labeled 'Coder', the belayer wears a harness labeled 'Code review', two others consulting a book and route map wear caps labeled 'Documentation' and 'Reuse', and another brings a box labeled 'Project management and snacks'."
knitr::include_graphics("images/horst-github-monsters.png")
```

::: {.footer}
Art by [Allison Horst](https://allisonhorst.com/)
:::

---

## {#issues-start data-menu-title="GitHub Issues (start)" background="#047C90"} 

<div class="vertical-center center-text">
<p class="custom-subtitle bottombr">Track ideas & TODOs using GitHub issues</p>
</div>

---

## {#add-issue data-menu-title="Adding issues"} 

[Add a new issue from a repo's *Issues* tab]{.slide-title}

<hr>

>*"GitHub Issues are items you can create in a repository to plan, discuss and track work. Issues are simple to create and flexible to suit a variety of scenarios. You can use issues to track work, give or receive feedback, collaborate on ideas or tasks, and efficiently communicate with others."*

[**A few helpful features:**]{.body-text-m}

- [create task lists](https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/about-task-lists) & [convert individual tasks to issues](https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/about-task-lists#about-issue-task-lists)
- [attach files](https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/attaching-files)
- [add permalinks](https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/creating-a-permanent-link-to-a-code-snippet)
- [add labels](https://docs.github.com/en/issues/tracking-your-work-with-issues/quickstart#adding-labels)
- [assign users](https://docs.github.com/en/issues/tracking-your-work-with-issues/assigning-issues-and-pull-requests-to-other-github-users)
- [reference issues in other issues, commits, PRs](https://docs.github.com/en/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue)
- [configure issue templates](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository)

::: {.footer}
Learn more by exploring [GitHub Docs](https://docs.github.com/en/issues/tracking-your-work-with-issues/about-issues)
:::

---

## {#issues-screenshot data-menu-title="Issue screenshot"} 

```{r}
#| eval: true
#| echo: false
#| out-width: "100%"
#| fig-align: "center"
knitr::include_graphics("images/example-issue.png")
```

::: {.footer}
Explore some real issues on the very real [ggplot2 repository](https://github.com/tidyverse/ggplot2/issues)
:::

---

## {#use-issues data-menu-title="When to use issues"} 

[When should I use issues?]{.slide-title}

<hr>

<br>

[***Issues are a useful and valuable tool for tracking TODOs, jotting down ideas, recording bugs, etc., regardless of whether you're working alone or with collaborators.***]{.body-text-m}

<br>

. . . 

Like most things, it's great to **put some care and thought into writing an issue** (*especially* when collaborating or contributing thoughts to a public project e.g. [ggplot2](https://github.com/tidyverse/ggplot2/issues)). . .

<br>

. . . 

. . . *but* I'd also argue that **a hasty issue on a personal project can still go a long way** in helping you remember a helpful resource, or that idea that popped into your mind at a time you couldn't devote much attention to it.

---

## {#projects-start data-menu-title="GitHub Projects (start)" background="#047C90"} 

<div class="vertical-center center-text">
<p class="custom-subtitle bottombr">Organize and prioritize issues (and pull requests) using GitHub projects</p>
</div>

---

## {#projects data-menu-title="Projects"} 

[Create a project from your profile's *Projects* tab]{.slide-title2}

<hr>

>*"Projects are an adaptable collection of items that stay up-to-date with GitHub data. Your projects can track issues, pull requests, and ideas that you note down. You can add custom fields and create views for specific purposes."*

[**A few helpful features:**]{.body-text-m}

- [add issues or pull requests](https://docs.github.com/en/issues/planning-and-tracking-with-projects/managing-items-in-your-project/adding-items-to-your-project) (from multiple repos) to the same project
- [change and / or customize your project layout](https://docs.github.com/en/issues/planning-and-tracking-with-projects/customizing-views-in-your-project/changing-the-layout-of-a-view) (you may also add multiple views)
- [link projects to relevant repositories](https://docs.github.com/en/issues/planning-and-tracking-with-projects/managing-your-project/adding-your-project-to-a-repository)
- [manage access (for organization-level projects)](https://docs.github.com/en/issues/planning-and-tracking-with-projects/managing-your-project/managing-access-to-your-projects)

::: {.footer}
Learn more by exploring [GitHub Docs](https://docs.github.com/en/issues/planning-and-tracking-with-projects/learning-about-projects/about-projects)
:::

--- 

## {#projects-screenshot data-menu-title="Projects screenshot"} 

```{r}
#| eval: true
#| echo: false
#| out-width: "100%"
#| fig-align: "center"
knitr::include_graphics("images/sam-project.png")
```

::: {.footer}
An example project for [my personal projects](https://github.com/users/samanthacsik/projects/3/views/1). 
:::

---

## {#use-projects data-menu-title="When to use projects"} 

[When should I use projects?]{.slide-title}

<hr>

<br>

[***If you use issues, projects may offer an additional helpful way to organize your tasks.***]{.body-text-m}

<br>

. . .

Code is oftentimes spread across **multiple repositories** (capstones & GPs are an excellent examples of this!) -- projects can be particularly **helpful for tracking TODOs and progress across them.**


<br>

. . . 

**Projects are not *required*** -- you can decide if they are a helpful tool for you / your team.

---

## {#orgs-start data-menu-title="GitHub Organizations (start)" background="#047C90"} 

<div class="vertical-center center-text">
<p class="custom-subtitle bottombr">Collaborate with teams across shared projects using GitHub organizations</p>
</div>

---

## {#GH-orgs data-menu-title="GitHub Organizations"} 

[Create an organization from your GitHub profile]{.slide-title2}

<hr>

>*"Organizations are shared accounts where businesses and open-source projects can collaborate across many projects at once, with sophisticated security and administrative features."*

<br>

Click on the **Create new** ("+") button or by clicking on your profile image (top right corner) > Your organizations > New organization. *Choose the "free" option.*

<br>

[**A few helpful features:**]{.body-text-m}

- [invite users](https://docs.github.com/en/organizations/managing-membership-in-your-organization/inviting-users-to-join-your-organization)
- [assign roles](https://docs.github.com/en/organizations/managing-peoples-access-to-your-organization-with-roles/using-organization-roles) 
- [create](https://docs.github.com/en/organizations/organizing-members-into-teams/creating-a-team) and [add members to teams](https://docs.github.com/en/organizations/organizing-members-into-teams/adding-organization-members-to-a-team)
- [customize your org's profile](https://docs.github.com/en/organizations/collaborating-with-groups-in-organizations/customizing-your-organizations-profile) (revisit the [README guidelines](https://ucsb-meds.github.io/README-guidelines/#organization-level-readmes) for info on organization READMES)

::: {.footer}
Learn more by exploring [GitHub Docs](https://docs.github.com/en/organizations/collaborating-with-groups-in-organizations/about-organizations). Also note the importance of [assigning multiple organization owners](https://docs.github.com/en/organizations/managing-peoples-access-to-your-organization-with-roles/maintaining-ownership-continuity-for-your-organization).
:::

---

## {#org-screenshot data-menu-title="Organization screenshot"} 

```{r}
#| eval: true
#| echo: false
#| out-width: "100%"
#| fig-align: "center"
knitr::include_graphics("images/nceas-org.png")
```

::: {.footer}
The [NCEAS Organization](https://github.com/NCEAS) is home to over 100 [repositories](https://github.com/orgs/NCEAS/repositories), and many [members](https://github.com/orgs/NCEAS/people), [teams](https://github.com/orgs/NCEAS/teams), and [projects](https://github.com/orgs/NCEAS/projects)
:::

---

## {#use-orgs data-menu-title="When to use organizations"} 

[When should I use organizations?]{.slide-title}

<hr>

[***TODO***]{.body-text-m}

<br>

- branding

https://github.com/orgs/community/discussions/69020

---

## {#ghp-start data-menu-title="GitHub Pages (start)" background="#047C90"} 

<div class="vertical-center center-text">
<p class="custom-subtitle bottombr">Host reports, documents, websites, etc. with GitHub Pages</p>
</div>

---

## {#GHP data-menu-title="GitHub Pages"} 

[GitHub Pages can be enabled for any repo]{.slide-title}

<hr>

<!-- >*"You can use GitHub Pages to host a website about yourself, your organization, or your project directly from a repository on GitHub."* -->

[You can host **one** website or rendered HTML document from any *public* GitHub repository.]{.body-text-m}

[**Hosting additional *websites* via GHP:**]{.body-text-m}

- same process as hosting your personal website (see [week 0 materials](https://ucsb-meds.github.io/creating-quarto-websites/#github-pages)) 
  - [**NOTE:** you're only allowed **one** user website with the `github.io` suffix, e.g. `<username>.github.io` -- all other URLs will be structured as `<username>.github.io/<repoName>`)]{.body-text-s}

[**Hosting a rendered HTML *document* via GHP:**]{.body-text-m}

- e.g. Quarto doc, Quarto presentation, Quarto manuscript...etc.
- rendered file must be named `index.html` and live in your repo's root directory; no other configurations necessary
- deploy from **Settings** > **Pages** > set branch to **main** and directory to **root**
- re-render `index.html`, then push to GitHub to update deployment

---

## {#ghp-screenshot data-menu-title="GHP screenshot"} 

<br>

:::: {.columns}

::: {.column width="50%"}
```{r}
#| eval: true
#| echo: false
#| out-width: "100%"
#| fig-align: "center"
knitr::include_graphics("images/ghp-repo.png")
```
:::

::: {.column width="50%"}
```{r}
#| eval: true
#| echo: false
#| out-width: "100%"
#| fig-align: "center"
knitr::include_graphics("images/ghp-settings.png")
```
:::

::::

::: {.center-text}
The materials for [creating your personal website using Quarto](https://ucsb-meds.github.io/creating-quarto-websites/#is-quarto-necessary) (above) is one example of a published document. Similarly, the slides for [customizing your Quarto website](https://ucsb-meds.github.io/customizing-quarto-websites/#/title-slide) are also published using GitHub Pages.
:::

---

## {#use-GHP data-menu-title="When to use GHP"} 

[When should I use GitHub Pages?]{.slide-title}

<hr>

<br>

<!-- [***You can use GitHub Pages to host a variety of projects and resources from personal GitHub profiles or GitHub organizations. Some examples: -->

[***You can use GitHub Pages to host projects and resources that you want to share publicly with others (e.g. colleagues, clients, potential employers, etc.).***]{.body-text-m}

<br>

. . . 

GitHub Pages can be enabled from any public repo owned by a personal profile *or* organization.

<br>

. . .

Consider hosting instructional documentation, software user guides, reports, project websites, etc.

---

## {#gha-start data-menu-title="GitHub Actions (start)" background="#047C90"} 

<div class="vertical-center center-text">
<p class="custom-subtitle bottombr">Automate workflows with GitHub Actions</p>
</div>

---

## {#what-are-GHA data-menu-title="What are GHA?"} 

[What are GitHub Actions?]{.slide-title}

<hr>

[**From GitHub Docs:**]{.body-text-m}

>GitHub Actions (GHA) is a continuous integration and continuous delivery (CI/CD) platform that allows you to automate your build, test, and deployment pipeline.

<br>

[**You can use GHA to automate *pretty much anything* (truly)! But some concrete examples:**]{.body-text-m}

::: {.incremental}
- building and deploying a GitHub Pages site whenever changes are pushed or merged into `main` (what we'll be doing today)
- adding appropriate labels whenever someone creates a new issue in your repo
- runing tests whenever code is pushed to a repo to ensure new changes don't break existing code
- running data analysis pipelines whenever new data is pushed to the repo
- running linters to ensure code adheres to a particular style guide
:::

---

## {#defs data-menu-title="GHA definitions"} 

[Some definitions]{.slide-title}

<hr>

```{r}
#| eval: true
#| echo: false
#| out-width: "80%"
#| fig-align: "center"
knitr::include_graphics("images/gha-runner.png")
```

::: {.incremental}
- **workflow:** a configurable automated process that will run one or more *jobs*, which are defined by a YAML file in your repo (e.g. automatically build and redeploy a GitHub Pages site)
- **event:** a specific activity in a repo that triggers a *workflow* run (e.g. pushing modified files to GitHub)
- **job:** a set of steps in a *workflow* that is executed on the same *runner;* steps are executed in order (e.g. check out repo, install Quarto, install R + dependencies, render & publish Quarto project)
- **runner:** a server that runs your *workflows* when they're triggered
:::

::: {.footer}
Read more on [GitHub Docs](https://docs.github.com/en/actions/about-github-actions/understanding-github-actions)
:::

---

## {#templates data-menu-title="Workflow templates"}

[Get started with a workflow template]{.slide-title}

<hr>

<br>

Rather than starting from a blank slate, you can **use as-is *or* adapt pre-made [workflow templates](https://docs.github.com/en/actions/writing-workflows/using-workflow-templates)** to create your desired GitHub Actions workflow.

. . . 

<br>

The next few slides walk through setting up a *GitHub Action you can use to automate the building and deployment of your Quarto website. We'll use a [workflow template](https://quarto.org/docs/publishing/github-pages.html#example-knitr-with-renv) provided in the Quarto documentation.

. . .

<br>

**We'll follow these general steps:** 

1. Set up a virtual environment for our project
2. Create a `gh-pages` branch, where our rendered website files will be stored
3. Add a GHA workflow to our repository
4. Reconfigure GitHub Pages to serve our website from our `gh-pages` branch

::: {.footer}
**IMPORTANT:** The following instructions assume you've only included R code in your Quarto website. If you have content (e.g. blog posts) that include Python code, you'll need to modify our chosen workflow.
:::

---

## {#renv data-menu-title="{renv}"}

[1. Set up a virtual environment]{.slide-title}

<hr>

---

## {#use-GHA data-menu-title="When to use GHA"} 

[When should I use GHA?]{.slide-title}

<hr>


---

<!-- --- -->

<!-- ## {#templates data-menu-title="Workflow templates"}  -->

<!-- [Get started with a workflow template]{.slide-title} -->

<!-- <hr> -->

<!-- --- -->

<!-- https://www.youtube.com/watch?v=arzBRW5XIkg -->

---

need to use [`{renv}` package](https://rstudio.github.io/renv/#:~:text=Use%20renv%3A%3Ainit(),recorded%20into%20a%20lockfile%2C%20renv.)

>Use `renv::init()` to initialize renv in a new or existing project. This will set up a project library, containing all the packages youâ€™re currently using. The packages (and all the metadata needed to reinstall them) are recorded into a lockfile, renv.lock, and a .Rprofile ensures that the library is used every time you open that project.
>
>As you continue to work on your project, you will install and upgrade packages, either using install.packages() and update.packages or renv::install() and renv::update(). After youâ€™ve confirmed your code works as expected, use renv::snapshot() to record the packages and their sources in the lockfile.
>
>Later, if you need to share your code with someone else or run your code on new machine, your collaborator (or you) can call renv::restore() to reinstall the specific package versions recorded in the lockfile.

---

- install `{renv}`
- run `renv::init()`
- say Y when it asks if you want to proceed
- install `{yaml}` if prompted (`Warning: The 'yaml' package is required to parse dependencies within Quarto Markdown files`)

- go to github repo
- click on branch dropdown > View all branches > New Branch > in the New branch name field, type `gh-pages` > click Create new branch

- return to RStudio
- using Terminal or New folder button, add a folder named `.github` in your root directory
- inside `.github/` create another folder called `workflows`
- inside `workflows/` add a file (using Terminal or New File > Text file) named `publish.yml`
- copy content from https://quarto.org/docs/publishing/github-pages.html#example-knitr-with-renv into `publish.yml`
- remove line in `_quarto.yml` (`output-dir: docs`)
- delete `docs/` folder
- add commit push to github

- return to github
- (you will probably get an email saying [yourUserName/yourSiteName] pages build and deployment workflow run)
- go to Settings > Pages > switch branch from `main` to `gh-pages` and from `/docs` to `/(root)` > click Save > check out Actions tab while your site redeploys



